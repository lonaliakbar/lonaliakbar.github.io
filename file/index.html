<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ali Akbar | File Manager</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"/>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap');
    body { font-family: 'Poppins', sans-serif; background-color: #000; color: white; margin: 0; display: none; }
    .container { width: 80%; margin: auto; padding: 20px; }
    .nav { background: #111; padding: 15px; display: flex; justify-content: space-between; border-bottom: 2px solid gold; }
    .nav .logo { font-size: 2em; font-family: 'Dancing Script', cursive; color: gold; margin-left: 20px; }
    .nav .menu { display: flex; gap: 20px; }
    .nav .menu a { color: gold; text-decoration: none; font-weight: bold; transition: color 0.3s; }
    .nav .menu a:hover { color: #d4af37; }
    .footer { background: #111; color: gold; text-align: center; padding: 30px 20px; margin-top: 40px; border-top: 2px solid gold; }
    .file-manager { background: #111; padding: 20px; border-radius: 15px; box-shadow: 0 4px 10px rgba(212, 175, 55, 0.5); border: 2px solid gold; margin-top: 20px; }
    .file-list { list-style: none; padding-left: 20px; margin: 0; }
    .file-list li { padding: 10px; border-bottom: 1px solid gold; display: flex; align-items: center; gap: 10px; cursor: pointer; flex-wrap: wrap; }
    .file-list li:hover { background: rgba(212, 175, 55, 0.1); }
    .file-icon { font-size: 1.5em; color: gold; }
    .file-details { font-size: 0.9em; color: #d4af37; margin-left: auto; }
    .loading { position: fixed; width: 100%; height: 100%; background: black; display: flex; justify-content: center; align-items: center; font-size: 2em; color: gold; z-index: 100; }
  </style>
</head>
<body>
  <div class="loading" id="loading">Memuat...</div>

  <div class="nav">
    <div class="logo">Ali Akbar</div>
    <div class="menu">
      <a href="#">Home</a>
      <a href="#">Tentang</a>
      <a href="#">Artikel</a>
      <a href="#">Kontak</a>
    </div>
  </div>

  <div class="container">
    <div class="file-manager">
      <h2 style="color: gold; text-align: center;">File Manager</h2>
      <ul class="file-list" id="file-list"></ul>
    </div>
  </div>

  <footer class="footer">
    <p>&copy; 2025 Ali Akbar. Semua Hak Dilindungi.</p>
  </footer>

  <script>
    const username = "lonaliakbar";
    const repo = "lonaliakbar.github.io";
    const folder = "files";
    const iconMap = {
      pdf: "fa-file-pdf", doc: "fa-file-word", docx: "fa-file-word", xls: "fa-file-excel", xlsx: "fa-file-excel",
      txt: "fa-file-alt", js: "fa-file-code", html: "fa-file-code", css: "fa-file-code", png: "fa-file-image",
      jpg: "fa-file-image", jpeg: "fa-file-image", gif: "fa-file-image", mp4: "fa-file-video", avi: "fa-file-video",
      zip: "fa-file-zipper", default: "fa-file"
    };

    function formatSize(bytes) {
      if (!bytes || bytes === 0) return "0 KB";
      const sizes = ["Bytes", "KB", "MB", "GB"];
      const i = Math.floor(Math.log(bytes) / Math.log(1024));
      return `${(bytes / Math.pow(1024, i)).toFixed(1)} ${sizes[i]}`;
    }

    async function tampilkan(path, ulTarget) {
      const url = `https://api.github.com/repos/${username}/${repo}/contents/${path}`;
      const data = await fetch(url).then(res => res.json());
      data.forEach(item => {
        const li = document.createElement("li");
        const icon = document.createElement("i");
        icon.className = "file-icon fas";
        li.appendChild(icon);

        if (item.type === "dir") {
          icon.classList.add("fa-folder");
          const span = document.createElement("span");
          span.textContent = item.name;
          span.style.color = "gold";
          li.appendChild(span);

          const nestedList = document.createElement("ul");
          nestedList.className = "file-list";
          nestedList.style.display = "none";
          li.appendChild(nestedList);

          li.addEventListener("click", async (e) => {
            e.stopPropagation();
            if (nestedList.childElementCount === 0) {
              await tampilkan(path + "/" + item.name, nestedList);
            }
            nestedList.style.display = nestedList.style.display === "none" ? "block" : "none";
          });
        } else {
          const ext = item.name.split('.').pop().toLowerCase();
          icon.classList.add(iconMap[ext] || iconMap.default);
          const a = document.createElement("a");
          a.href = item.download_url;
          a.textContent = item.name;
          a.style.color = "gold";
          a.style.textDecoration = "none";
          a.target = "_blank";
          li.appendChild(a);

          const detail = document.createElement("span");
          detail.className = "file-details";
          detail.textContent = formatSize(item.size);
          li.appendChild(detail);
        }

        ulTarget.appendChild(li);
      });
    }

    window.onload = () => {
      setTimeout(async () => {
        document.getElementById('loading').style.display = 'none';
        document.body.style.display = 'block';
        await tampilkan(folder, document.getElementById("file-list"));
      }, 1000);
    };
  </script>
</body>
</html>
